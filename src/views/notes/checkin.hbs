<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<div class="container p-4" id="conti">
    <div class="row">
        <div class="col-md-4 mx-auto">
            <div class="card text-center">
                <div class="card-header">
                    <h3>
                        Tarea de {{mate}}
                    </h3>
                </div>
                <div class="card-boddy">
                    <div>
                        <img id="login" src="/imagen/clase.jpg" alt="logo Antz"
                            class="card-img-top mx-auto m-2 rounded-circle w-10">
                    </div>
                    <div>
                        <h3>
                            {{titulo}} {{descripcion}}
                        </h3>
                    </div>
                    <div>
                        <input type="text" value="{{Texto}}" id="Texto" name="Texto" value="Hola">
                    </div>
                    <div class="input-group mb-3" id="Tabla">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="bs-example">
    <div id="myModal" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Send Us a Message</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label>First Name</label>
                                <input type="text" id="Fname" class="form-control">
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label>Last Name</label>
                                <input type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <label>Comments</label>
                                <textarea class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" id="Envia" class="btn btn-primary">Send Email</button>
                </div>
            </div>
        </div>
    </div>
</div>



<script>
    const tablaDiv = document.getElementById('Tabla');
    var datos = [];
    var jss = [];
    var retVal = "";
    var fi034 = "";
    var cod1 = "";
    function comenzar() {
        document.getElementById("Tabla").innerHTML = "";
        carga();
        var cod = 'VTJGc2RHVmtYMTlQQ283azg3U2RtYVlDUjA4VEpON3c3ZGhMNWlZeVIxMD0&#x3D;'
        document.getElementById(cod).checked = true;
        activar(cod);
    }

    function carga() {
        var str = [{}];
        str1 = "{{alum01}}";
        if (str1 == "") {
            console.log("Vacio");
        } else {
            var str = str1;
            var res = str.replace(/&quot;/g, '"');
            jss = JSON.parse(res);
            tablaEner();
        }
    }

    function tablaEner() {
        document.getElementById('Tabla').innerHTML = "";
        var materia1 = "{{mate}}";
        var body = document.getElementById('Tabla');
        var tabla = document.createElement("table");
        var tblBody = document.createElement("tbody");
        var fila = document.createElement("tr");
        var { butn, nomBtn } = "";

        for (var y = 0; y < 4; y++) {
            var celda = document.createElement("td");
            switch (y) {
                case 0:
                    nomBtn = "Nombre";
                    break;
                case 1:
                    nomBtn = "Paterno";
                    break;
                case 2:
                    nomBtn = "Materno";
                    break;
                case 3:
                    nomBtn = "Grado";
                    break;
            }
            butn = document.createTextNode(nomBtn);
            celda.appendChild(butn);
            fila.appendChild(celda);
        }
        tblBody.appendChild(fila);

        for (var i = 0; i < jss.length; i++) {
            fila = document.createElement("tr");
            for (var j = 0; j < 6; j++) {
                celda = document.createElement("td");
                switch (j) {
                    case 0:
                        butn = document.createTextNode(jss[i].nombre);
                        break;
                    case 1:
                        butn = document.createTextNode(jss[i].aPaterno);
                        break;
                    case 2:
                        butn = document.createTextNode(jss[i].aMaterno);
                        break;
                    case 3:
                        butn = document.createTextNode(jss[i].grado + jss[i].grupo);
                        break;
                    case 4:
                        butn = document.createElement('div');
                        butn.setAttribute('class', 'input-group mb-2 nom1')
                        var ima = document.createElement('input');
                        ima.setAttribute("type", "checkbox")
                        ima.setAttribute("id", jss[i].codQr);
                        ima.setAttribute('class', ' check');
                        butn.appendChild(ima);
                        butn.addEventListener("click", clickchec, false);
                        break;
                    case 5:
                        butn = document.createElement('div');
                        butn.setAttribute('class', 'input-group mb-2 nom1')
                        var ima1 = document.createElement('input');
                        ima1.setAttribute("type", "hidden")
                        ima1.setAttribute("id", jss[i].codQr + "," + "text");
                        ima1.setAttribute('class', 'check');
                        ima1.setAttribute('disabled', "disabled");
                        butn.appendChild(ima1);
                        break;


                }
                celda.appendChild(butn);
                fila.appendChild(celda);
            }
            tblBody.appendChild(fila);
        }
        tabla.appendChild(tblBody);
        body.appendChild(tabla);
        tabla.setAttribute('class', ' table table-dark nom1');
    }



    function clickchec(e) {
        const y = e.target.getAttribute('id');
        activar(y);
    };

    function activar(y) {
        fi034 = "";
        const cod = y;

        cod1 = y + "," + "text";
        document.getElementById(cod1).value = "";

        if (document.getElementById(cod).checked == true) {
            VerCondiciones();
        } else {

            console.log("No paso" + fi034)
        }



    };

    function getValue() {
        retVal = prompt("Enter your name : ", "your name here");
        //document.write("You have entered : " + retVal);
    }


    function VerCondiciones() {

        $("#myModal").modal('show');
        const btt = document.getElementById('Envia');
        btt.addEventListener('click', fun01, {}, false);

    }
    function fun01() {

        fi034 = Fname.value;
        document.getElementById(cod1).value = fi034;
        $("#myModal").modal('hide');

    }

    window.addEventListener('load', comenzar, false)


</script>