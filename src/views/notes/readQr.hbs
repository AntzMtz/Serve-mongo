<video id="preview" autoplay="true" width="300" height="300"></video>
<div id="boton"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>


<script>
    var butt=document.getElementById('boton');
    let scanner = new Instascan.Scanner({
        video: document.getElementById('preview'),mirror: false
    });
    scanner.addListener('scan', function (content) {
        var encrypted = content;
        var deEncrBoat = atob(encrypted);
        var decrypted = CryptoJS.AES.decrypt(deEncrBoat, "");
        var derr = decrypted.toString(CryptoJS.enc.Utf8);

        console.log("conent: " + content);
        console.log("Boat: " + deEncrBoat);
        console.log("Desec: " + decrypted);
        //console.log("requo: "+req.body)
        alert("Texto a mostrar");
        butt.innerHTML="<button class='btn btn-success btn-block'  type='button' id='boton'><span class='spinner-border spinner-border-sm' role='status' aria-hidden='true'></span>loading</button>"

        console.log("Nombre: " + derr);
    });
    Instascan.Camera.getCameras().then(function (cameras) {
        if (cameras.length > 0) {
            scanner.start(cameras[0]);
        } else {
            console.error('No cameras found.');
        }
    }).catch(function (e) {
        console.error(e);
    });
</script>